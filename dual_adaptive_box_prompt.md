# “双-SnugBox”与倾斜自适应拉伸：一项针对3D高斯溅射光栅化效率的优化方案研究报告





## 摘要



本报告对一项旨在提升三维高斯溅射（3D Gaussian Splatting, 3DGS）光栅化效率的新型瓦片裁剪（Tile Culling）技术方案进行了详尽、专业的技术评估。该方案，在此称之为“**双-SnugBox及倾斜自适应拉伸**”（Dual-SnugBox with Skew-Adaptive Stretching），旨在通过一种创新的、计算成本极低的策略，显著减少光栅化过程中处理的冗余像素，从而提升渲染帧率。方案的核心思想是将单个紧凑的轴对齐包围盒（Axis-Aligned Bounding Box, AABB）分裂为两个非对称的“半框”，并根据投影高斯椭圆的倾斜角度自适应地调整其尺寸。

本报告将首先回顾3DGS光栅化管线中的核心挑战——过度绘制（Overdraw）问题，并梳理当前最先进的解决方案，如`Speedy-Splat`中提出的`SnugBox`与`AccuTile`技术，以建立评估基准。随后，报告将深入剖析“双-SnugBox”方案的内部机制，包括其双盒构建逻辑、倾斜自适应拉伸函数的设计原理，并对其中涉及的关键技术点（如极值点坐标`$x_1$`、`$y_2$`的含义及倾角`$\theta$`的计算方法）进行精确阐释。最后，报告将从理论性能、实现成本、与现有3DGS优化技术的正交协同性等多个维度评估该方案的综合价值，并提供一套可操作的研究、实现与实验验证路线图。

分析表明，该方案在设计上极为精妙，它以几乎可以忽略不计的计算开销，实现了接近于计算密集型精确裁剪方法的性能收益，在效率与精度之间取得了卓越的平衡。因此，本报告最终给出了强烈的正面评价，并建议立即推进该方案的进一步研究与开发。

------



## 1. 背景与动机：3D高斯溅射中的瓦片裁剪挑战



自Kerbl等人于2023年提出3D高斯溅射（3DGS）以来，该技术凭借其卓越的渲染质量和前所未有的实时渲染速度，迅速成为新视点合成与三维重建领域的研究热点 。然而，为了实现高效的、可微分的渲染，其初始的光栅化管线在设计上做出了一些简化，这为后续的性能优化留下了广阔空间。其中，瓦片裁剪阶段的效率是决定最终渲染帧率的关键瓶颈之一。  





### 1.1. 3DGS光栅化管线与过度绘制问题



3DGS的核心是将三维场景表示为数百万个参数化的三维高斯函数集合 。在渲染时，这些三维高斯体被投影到二维图像平面，形成一系列二维椭圆。为了利用现代GPU的并行架构，渲染过程采用了基于瓦片（Tile-based）的策略 。整个屏幕被划分为固定大小的网格（通常为16x16像素），每个瓦片由一个GPU线程块独立处理。  



渲染管线大致流程如下：

1. **投影与裁剪**：将每个三维高斯投影至二维图像空间，并确定其可能覆盖的瓦片范围。

2. **键值对生成**：为每个（高斯，瓦片）的有效组合生成一个键值对，键通常包含瓦片ID和高斯深度信息。

3. **排序**：使用高效的GPU基数排序（Radix Sort）算法，对所有键值对进行排序，确保在每个瓦片内，高斯 primitives 按照从前到后的深度顺序排列。

4. **渲染**：每个瓦片的线程块加载排序后的高斯列表，并逐像素、按深度顺序进行Alpha混合（Alpha Blending），最终合成该瓦片的颜色 。  

   

此流程中的关键瓶颈在于第一步的裁剪效率。原始的3DGS实现采用了一种非常保守的裁剪方法：它计算投影后二维协方差矩阵`$\Sigma_{2D}$`的最大特征值`$\lambda_{max}$`，并以此构建一个半径为`$r = \lceil 3\sqrt{\lambda_{max}} \rceil$`的圆，最后用一个外切正方形作为该高斯的包围盒 。对于各向异性（即被拉伸的）且带有旋转的椭圆，这个正方形包围盒的贴合度极差，包含了大量不属于椭圆内部的空白区域（参考提案图片中的  



`SnugBox`示意图 ）。  



这种不精确的包围盒导致了严重的**过度绘制（Overdraw）**问题：GPU需要为大量永远不会被着色的空像素启动计算，这不仅浪费了宝贵的计算资源，还增加了后续排序和渲染阶段的数据处理量与内存带宽消耗。`Speedy-Splat`论文中的性能分析明确指出，排序（`Radix Sort`）和最终渲染（`Render`）是管线中最耗时的部分 。因此，在裁剪阶段尽可能地减少需要处理的瓦片数量，是提升整体渲染性能最直接、最有效的途径。  





### 1.2. 现有先进裁剪技术：SnugBox与AccuTile的权衡



针对原始3DGS的过度绘制问题，`Speedy-Splat`一文提出了两种显著的改进方案，它们共同定义了当前瓦片裁剪技术的“效率前沿”（Efficiency Frontier）。  



**SnugBox：高效的紧凑包围盒** `SnugBox`是对原始包围盒计算方法的直接升级 。它不再使用基于最大特征值的粗略估计，而是通过解析方法直接求解投影椭圆方程在x轴和y轴上的四个切点（即极值点），从而构建一个真正紧密贴合椭圆的轴对齐包围盒（AABB）。这个过程考虑了高斯的不透明度  



`$\alpha$`，其计算是`$O(1)$`的常数时间复杂度。由于AABB与瓦片网格的相交测试仅需几次坐标比较，计算成本极低 ，  



`SnugBox`在几乎不增加计算开销的情况下，大幅减少了需要处理的瓦片数量，带来了高达1.82倍的平均性能提升 。  



**AccuTile：精确但昂贵的裁剪** `AccuTile`则追求极致的裁剪精度 。在  



`SnugBox`的基础上，它旨在找出与椭圆**精确相交**的瓦片集合。其实现方式是，沿着`SnugBox`较短的一边逐行（或逐列）迭代，对每一条瓦片边界线，求解它与椭圆的交点。通过这种方式，`AccuTile`可以完美剔除所有不与椭圆实际接触的瓦片，将过度绘制降至理论最低。

然而，这种精确性是有代价的。提案中敏锐地指出，`AccuTile`引入了大量的额外计算 [研究方向提示]。求解直线与椭圆的交点需要解一个二次方程 。在每帧需要处理数百万个高斯的场景中，为每个高斯多次执行这种计算，会给GPU带来沉重的负担。  



`Speedy-Splat`的实验数据也证实了这一点：尽管`AccuTile`比`SnugBox`裁剪得更紧，但最终的性能提升（1.99倍）相比`SnugBox`（1.82倍）的增幅有限，这表明其增加的计算开销部分抵消了裁剪带来的收益 。  



因此，`SnugBox`和`AccuTile`代表了裁剪算法在“计算成本-裁剪精度”二维空间中的两个关键锚点。前者成本极低、精度良好；后者成本高昂、精度完美。任何新的裁剪方案的价值，都在于其能否在该空间中找到一个更优的平衡点——即以接近`SnugBox`的成本，获得接近`AccuTile`的精度。这正是“双-SnugBox”方案试图解决的核心问题。



## 2. “双-SnugBox及倾斜自适应拉伸”方案深度解析



本节将依据提案文件 ，对“双-SnugBox”方案的各项技术细节进行逐一解构与分析，评估其设计的合理性与创新性。  





### 2.1. 核心机制：从单包围盒到双非对称包围盒



该方案的流程设计巧妙地分层递进，旨在用最简单的几何操作逼近复杂的椭圆形状。

**第一步：极值点检测** 算法的第一步完全继承了`SnugBox`的成熟做法，即通过解析方式求解投影椭圆的四个轴对齐切点。一个以原点为中心、经过旋转的二维椭圆，其隐式方程可以写作二次型：

ax2+2bxy+cy2=1

或者更一般地，对于一个中心为`$\mu = (c_x, c_y)$`，协方差矩阵为`$\Sigma$`的投影高斯，其等高线方程为：

(x−μ)⊤Σ−1(x−μ)=tα

其中`$t_{\alpha} = -2\ln\alpha$`，`$\alpha$`是透明度阈值（如1/255）。对该方程分别关于  



`$x$`和`$y$`求偏导并令其为零，即可解出四个极值点：`$(x_{\min}, y_1), (x_{\max}, y_2), (x_1, y_{\min}), (x_2, y_{\max})$`。这一步的计算是`$O(1)$`的，无额外成本。

**第二步：左右分箱与`$x_1, y_2$`的含义澄清** 这是方案的第一个关键创新点。它没有将这四个点直接构成一个矩形，而是以高斯中心`$\mu = (c_x, c_y)$`的x坐标`$c_x$`为界，将它们分为“左”、“右”两组。例如，若`$x_{\min} < c_x$`，则`$(x_{\min}, y_2)$`点被归入左组；若`$x_2 > c_x$`，则`$(x_2, y_{\max})$`点被归入右组。

在此，必须精确阐明提案中`$x_1, y_2$`等符号的含义。根据椭圆几何和求导过程，这些“非极坐标”的值是与极值点配对的坐标。具体来说：

- **`$x_1$`** 是当椭圆达到其y方向最小值`$y_{\min}$`时，椭圆边界上该点的x坐标。
- **`$y_2$`** 是当椭圆达到其x方向最大值`$x_{\max}$`时，椭圆边界上该点的y坐标。 （同理，`$x_2$`是`$y_{\max}$`处的x坐标，`$y_1$`是`$x_{\min}$`处的y坐标）。

**第三步：双盒构建** 这是方案的第二个关键创新。它利用分箱后的点集与中心点`$\mu$`共同构建**两个**AABB。如提案图示 ，左盒由左组的极值点与中心点  



`$\mu$`一起确定边界，右盒亦然。例如，左盒的x范围可能是`$[x_{\min}, c_x]$`，y范围则由左组点的y坐标和`$c_y$`共同决定。

这两个AABB的并集构成了一个非凸的包围区域。对于倾斜的椭圆，这个“双盒”区域（提案图中粉色部分）相比于单个`SnugBox`（红色部分），能够显著地“挖掉”四个角落的大片空白区域。这种设计巧妙地利用了椭圆自身的凸性。单个`SnugBox`是包含四个极值点的最小**凸**轴对齐区域。而“双-SnugBox”通过引入中心点作为共享顶点，构造了一个简单的**非凸**包围形状。这种形状能更紧密地贴合倾斜椭圆的“腰部”，而其增加的计算代价仅仅是在渲染时多做一次AABB-瓦片相交测试，这是一个极具吸引力的交换。

这种方法可以看作是对更复杂的定向包围盒（Oriented Bounding Box, OBB）的一种轻量级近似。计算和测试OBB的相交通常比AABB复杂得多 。“双-SnugBox”方案以一种“几何技巧”的方式，在保持AABB计算极简性的同时，获得了类似OBB对旋转物体贴合度更高的优点。  





### 2.2. 倾斜自适应拉伸函数`$\delta(\theta)$`



双盒机制虽然对倾斜椭圆效果显著，但对于接近水平或垂直的椭圆（即长轴与坐标轴近乎平行）却存在覆盖不足的风险。此时，两个盒子会变得非常窄长，无法覆盖椭圆长轴方向的“尾部”，如提案图“不做延伸”所示 。自适应拉伸正是为了解决这一问题。  



**拉伸目标**：

- 当椭圆长轴与x轴夹角`$\theta \approx 0^\circ$`或`$90^\circ$`时，拉伸应最强，以确保完全覆盖。
- 当椭圆倾斜`$\theta \approx 45^\circ$`时，双盒已经非常贴合，此时不应有额外拉伸。

**拉伸函数`$s(\theta) = 1 + |\cos(2\theta)|$`分析**： 提案中给出的缩放系数函数`$s(\theta)$`在数学上极为精妙，完美地映射了上述几何需求：

- **周期性与对称性**：几何问题要求拉伸效果每90度循环一次，且关于45度对称。函数`$\cos(2\theta)$`的周期为`$\pi$`（180度），而`$|\cos(2\theta)|$`的周期为`$\pi/2$`（90度），正好满足要求。
- **关键点行为**：
  - 当`$\theta = 0^\circ$`或`$90^\circ$`时，`$2\theta = 0^\circ$`或`$180^\circ$`，`$|\cos(2\theta)| = 1$`，因此缩放系数`$s(\theta) = 2$`。这意味着盒子的长度被拉伸到原来的两倍，从而恢复了单`SnugBox`的覆盖范围，保证了安全性。
  - 当`$\theta = 45^\circ$`时，`$2\theta = 90^\circ$`，`$|\cos(2\theta)| = 0$`，因此`$s(\theta) = 1$`。这意味着不进行任何额外拉伸，因为此时双盒形态最优。
- **计算效率**：该函数仅涉及一次乘法、一次`cos`和一次`abs`，计算成本极低，非常适合在GPU上大规模并行执行，无需任何分支判断或查表操作。
- **可微性**：函数梯度连续，为未来将拉伸程度作为可学习参数引入优化过程提供了可能性。

**拉伸增量`$\delta(\theta)$`**： 最终的拉伸长度增量`$\delta(\theta)$`由`$\delta(\theta) = (s(\theta) - 1) \cdot \ell_0$`给出，其中`$\ell_0$`是未拉伸时盒子的原始长度。这个增量被施加在每个“半框”的“长边”上，即沿着远离中心的方向进行扩展。

**`$\beta$`参数的引入**： 提案中还建议了一个改进`$s(\theta) = 1 + \beta|\cos(2\theta)|, \beta \in [1, 1.2]$`。这是一种稳健的工程实践，通过引入一个略大于1的“安全系数”`$\beta$`，可以为因浮点误差或极端椭圆形状导致的潜在覆盖不足提供一个缓冲带，代价是牺牲少量裁剪精度。



### 2.3. 椭圆倾角`$\theta$`的计算方法对比



计算倾角`$\theta$`是自适应拉伸的关键。提案对比了两种方法，这体现了对3DGS管线不同发展阶段的深刻洞察。

| 求角方式         | 原理与公式                                                   | 优点                                                         | 局限性                                                       |
| ---------------- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| **协方差矩阵法** | 本质是求解投影协方差矩阵`$\Sigma_{2D}$`的特征向量方向。公式为`$\theta = \frac{1}{2} \arctan \frac{2\sigma_{xy}}{\sigma_{xx} - \sigma_{yy}}$`，等价于使用`atan2`函数`$\theta = \frac{1}{2} \text{atan2}(2\sigma_{xy}, \sigma_{xx} - \sigma_{yy})$`以保证数值稳定性 。 | **精确**：直接从椭圆的数学定义导出，结果是长轴的精确角度。 **高效复用**：`$\Sigma_{2D}$`的各分量是3DGS投影过程中的中间产物，无需额外的大量计算。 | 依赖于协方差矩阵的完整信息。在渲染端若只存储了变换后的矩阵，可能需要一次`atan2`计算，有微小开销。 |
| **几何中点法**   | 一种几何启发式方法。例如，使用中心点`$\mu$`与某个极值点（如`$(x_{\min}, y_{\max})$`）的连线向量来近似长轴方向。公式为`$\theta = \text{atan2}(y_{\max} - c_y, x_{\min} - c_x)$` [Proposal_new]。 | **不依赖协方差**：即使未来模型压缩技术丢弃了协方差的某些项（如`$\sigma_{xy}$`），仅保留顶点信息，此方法依然可用。 **计算简单**：纯几何运算，不涉及矩阵分解。 | **精度较低**：其准确性严重依赖于椭圆的偏心率。对于非常“瘦长”的椭圆，极值点可能偏离长轴顶点很远，导致角度误差巨大。 **鲁棒性差**：当椭圆极端扁平时，极值点可能远离中心，数值稳定性变差。 |

**推荐策略**：

- **对于标准3DGS管线**：应**优先使用协方差矩阵法**。其精度高，且依赖的`$\sigma_{xx}, \sigma_{xy}, \sigma_{yy}$`等值在渲染前处理阶段本就存在，因此是当前最优选择。

- **面向未来的压缩模型**：几何中点法展示了该方案的**前瞻性**。当前3DGS领域的一大研究方向是模型压缩与剪枝，以减小存储和传输开销 。如果未来的模型格式为了极致压缩而舍弃了完整的协方差信息，那么这种纯几何的近似方法将成为唯一可行的选择。提案中包含此方法，说明其设计者不仅在解决当前问题，也在为技术的未来演进铺路。不过，若要实际应用，必须增加鲁棒性修正，例如对四个极值点进行RANSAC拟合，或使用更复杂的几何规则来选择更合适的点对。  

  



## 3. 性能、实现与综合影响评估



本节将从更宏观的视角，评估“双-SnugBox”方案的理论性能、实现细节及其在整个3DGS生态系统中的定位。



### 3.1. 理论性能与效率分析



**计算开销**： 该方案的额外计算开销极小，完全可控。对于每个高斯，增加的计算量仅包括：

1. 一次倾角`$\theta$`的计算（协方差法中为一次`atan2`和几次算术运算）。
2. 一次拉伸系数`$s(\theta)$`的计算（一次`cos`和几次算术运算）。
3. 一次额外的AABB-瓦片相交测试。 这些操作的总和是`$O(1)`的常数时间开销，与`AccuTile`中与瓦片数量相关的迭代计算相比，几乎可以忽略不计。

**性能增益**： 性能的提升主要来源于对管线后续阶段的负载削减：

1. **减少排序负载**：显著减少的（高斯，瓦片）键值对数量，直接降低了`RadixSort`这一关键瓶颈的工作量。`Speedy-Splat`的性能剖析显示，`RadixSort`的耗时在采用`SnugBox`后减少了一半以上 。可以预期，“双-SnugBox”将在此基础上进一步缩减其耗时。  

   

2. **减轻渲染负载**：每个瓦片需要处理的高斯列表变短，意味着像素着色器中的主循环迭代次数减少，从而直接提升渲染速度。

3. **改善内存与缓存效率**：这是一个更深层次的优势。更少的键值对意味着用于排序的临时缓冲区占用更少的显存。更重要的是，它极大地提升了GPU的缓存命中率。当一个瓦片关联的高斯列表更短时，这些高斯的参数（位置、颜色、协方差等）更有可能被完整地加载到GPU流式多处理器（SM）的高速共享内存（Shared Memory）中。这减少了因缓存未命中而从较慢的全局显存（Global VRAM）中读取数据所造成的延迟，从而使计算流水线更加流畅。

根据提案中的示意图和初步预估（额外削减30-40%空瓦片），该方案有望在`SnugBox`的基础上，再将渲染性能提升一个显著的台阶，尤其是在包含大量倾斜、各向异性高斯的复杂场景中。



### 3.2. 与其他3DGS优化技术的正交性与协同作用



一项优化技术的价值不仅在于其自身，还在于它如何与生态系统中的其他技术协同工作。“双-SnugBox”方案在这方面表现出极佳的**正交性**。

**与模型压缩/剪枝技术的互补性**： 诸如`Speedy-Splat`中的软/硬剪枝等技术，其目标是减少场景中高斯的绝对数量`$N$` 。而本方案的目标是减少  



**每个**高斯平均处理的瓦片数量。两者优化的目标不同，作用于管线的不同层面，其效果是**相乘**的。一个经过剪枝的、更稀疏的高斯场景，再通过“双-SnugBox”进行高效裁剪，将获得双重的性能增益。

**与先进像素着色技术的协同性**： 近期，3DGS领域的研究热点也集中在光栅化的“后端”，即像素着色阶段。例如，“Efficient Perspective-Correct 3D Gaussian Splatting Using Hybrid Transparency”  等工作致力于解决透视不正确和深度排序错误导致的“跳变”（popping）伪影问题。这些技术优化的是  



**如何**在像素层面正确、高效地混合高斯颜色，而“双-SnugBox”优化的是**哪些**高斯需要被送到像素着色器。两者完全正交，可以无缝集成。

一个2025年最先进的、高度优化的3DGS渲染管线，其架构很可能如下：

1. **离线阶段**：对模型进行剪枝、量化等压缩处理。
2. **每帧预处理（裁剪阶段）**：**采用“双-SnugBox及倾斜自适应拉伸”方案**，为每个高斯生成一个极度紧凑的待处理瓦片列表。
3. **每帧排序阶段**：对这个被大幅缩减的列表进行快速排序。
4. **每帧渲染（像素着色阶段）**：使用“混合透明度”（Hybrid Transparency）等先进技术，对排序后的高斯列表进行无伪影、高质量的颜色混合。

因此，本提案并非一个孤立的增量改进，而是构成未来高性能3DGS渲染器的一个关键、可插拔的模块。



### 3.3. 实现与实验验证路线图



为了将该方案从理论转化为实践，并严格验证其性能，建议遵循以下路线图：

**实现指南**：

- 在一个基于CUDA的3DGS渲染器中，修改负责预处理和键值对生成的GPU核函数（在`Speedy-Splat`中对应`preprocess`和`duplicateWithKeys`）。
- 在核函数中，为每个高斯增加以下逻辑：
  1. 计算投影协方差矩阵`$\Sigma_{2D}$`。
  2. 使用协方差法计算倾角`$\theta$`。
  3. 计算拉伸系数`$s(\theta)$`。
  4. 解析求解四个极值点。
  5. 根据中心点`$c_x$`进行左右分箱。
  6. 构建两个“半框”，并根据`$s(\theta)$`对它们的长边进行拉伸。
  7. 对每个瓦片，分别测试其是否与拉伸后的左盒或右盒相交。任一相交即为有效。

**实验设计**： 为了定量评估其效果，需要进行一次严谨的消融实验（Ablation Study）。

- **对比方法组**：

  1. **Baseline**：原始3DGS的圆形包围盒。
  2. **SnugBox**：`Speedy-Splat`的单AABB方法。
  3. **AccuTile**：`Speedy-Splat`的精确裁剪方法。
  4. **Dual-Box (no stretch)**：本方案，但不进行自适应拉伸。
  5. **Dual-Box (full)**：本方案的完整实现。

- **测试数据集**：应采用业界公认的标准数据集，如Mip-NeRF 360、Tanks & Temples等，这些数据集包含丰富的室内外、不同复杂度的场景 。  

  

- **性能指标**：

  - **宏观指标**：平均渲染帧率（FPS）、训练时间。
  - **微观指标**：**平均每个高斯覆盖的瓦片数**、**每帧生成的总瓦片实例数**、关键GPU核函数（`RadixSort`, `Render`）的执行时间（ms）。这些微观指标能更精确地揭示性能提升的来源。

- **验证性图表**：绘制“**空瓦片率 vs. 椭圆倾角`$\theta$`**”的曲线图。通过对比不同方法在该图上的表现，可以直观地验证自适应拉伸函数`$s(\theta)$`是否如预期那样，在`$\theta \approx 0^\circ, 90^\circ$`时有效降低了空瓦片率，而在`$\theta \approx 45^\circ$`时保持了双盒原有的优势。



## 4. 结论与战略建议



### 4.1. 综合结论



经过全面深入的技术分析，可以得出以下结论：

“**双-SnugBox及倾斜自适应拉伸**”方案是一项针对3DGS瓦片裁剪问题提出的、极具创新性的高效解决方案。它在理论上是稳固的，在数学设计上是精妙的，在实现上是轻量级的。

- **创新性**：通过将单个AABB拆分为两个非对称、可拉伸的“半框”，该方案以一种新颖的思路，在保持轴对齐几何计算简便性的前提下，极大地提升了对旋转椭圆的包围紧密度。
- **高效性**：该方案的计算开销为`$O(1)$`常数级，远低于追求完美精度的`AccuTile`，但其裁剪效果却有望显著优于`SnugBox`，特别是在普遍存在的各向异性场景中。它在“计算成本-裁剪精度”的效率前沿上，占据了一个非常有利的新位置。
- **系统性**：该方案与其他3DGS优化技术（如剪枝、先进着色）高度正交，可作为模块无缝集成到现代渲染管线中，共同提升系统整体性能。



### 4.2. 最终建议



**本报告对“双-SnugBox及倾斜自适应拉伸”方案给予强烈且明确的推荐，建议立即投入资源进行原型实现与实验验证。**

该方案的潜在收益巨大，而研发风险极低。它有望成为继`SnugBox`之后，3DGS光栅化器中新的标准裁剪组件，为桌面端、移动端以及VR/AR等对性能敏感的应用场景带来稳定、可观的性能提升。